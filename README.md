# MLOps_chatbot

## 고객상담용 간단 챗봇

### 비로그인 사용자 챗봇
- 질의응답 기능
    - 사용설명서와 간단한 금융 어휘를 각각 벡터화후 벡터스토어에 저장
    - 각각의 벡터스토어에 검색기를 따로 만든 후 tool처럼 활용
    - 사용자 질문에 맞게 tool 선택
    - 이를 위해 프롬프트에 예시를 작성해 안정성을 높임

### 로그인 사용자 챗봇
- 질의응답 기능
    - 비로그인 사용자 챗봇과 동일한 기능
    - 비로그인 사용자 챗봇을 상속받아 똑같이 구현하게 만듬

- 간이대출심사
    - 간이대출심사 툴을 따로 제작
    - 이 툴을 활용하면 사용자는 연봉, 마지막 대출 후 경과한 햇수, 대출희망금액을 입력하면 간이대출심사 가능
        - 예시) 나 대출 받고싶어. 연봉은 3000만원이고, 대출 받은지 3년 됐어. 5000만원 대출 받고싶어.
    - 프롬프트에 이 툴을 호출하게 될 때를 예시로 따로 작성
        - 나 대출 가능해? 와 같은 질문엔 simple_screening을 쓰세요
    - 전화번호를 서버에 요청한 후 이를 활용해 다른 데이터를 불러옴
    - 불러온 데이터를 바탕으로 dti를 계산
    - 연봉, dti, 마지막 대출 후 경과한 햇수, 대출 희망 금액을 대출심사모델에 입력값으로 넣음
    - 이를 바탕으로 대출 가능, 대출 가능하지만 금리가 높음, 대출 불가 판정을 하게됨

- 대화내역저장
    - mysql을 활용해 대화내역을 DB에 저장
    - memory_key는 session_id
    - 챗봇은 이 대화내역을 바탕으로 대답
        - 문맥에 맞는 대답을 할 수 있게됨
        - 그 둘의 차이가 뭐야? 다시 설명해줘. 와 같은 질문에 제대로 답할 수 있게 됨.
    - session_id는 유저의 uuid에 접속 날짜를 붙인 값
        - 이를 통해 모델의 대화 내역 검색 시간을 줄임
